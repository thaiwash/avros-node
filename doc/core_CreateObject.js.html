<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/CreateObject.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/CreateObject.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author Taivas Gogoljuk

Object description can have
 - "type" = "cube" | "sphere" | "plane" | "empty"
 - "id" = number
 **/

module.exports = {
  /**
    * Spawns object in front of connected players

    * @method
    * @param {String} player - player name
    * @param {Object} params - description object
 */
  "SpawnAsInterest": function(player, object) {
    var t1 = new Transform(this.players[player].head.position, this.players[player].head.rotation);
    var vec = t1.transformPosition(new Vector3(0, 0, 0.5))

    object.position = vec
    object.rotation = this.players[player].head.rotation

    this.DescribeObject(object, player)
  },

  /**
     * Spawns in object

     * @object
     * @param {Object} params - description object
  */
  "Spawn": function(object) {
    this.UpdateObject(this.Construct(object))
  },

  /**
   * Spawns a prefabricated asset made with unity
   * @method
   * @param {String} asset - path to asset
   * @returns {Object} Returns the generated object
   */
  "SpawnAsset": function(type) {
    return {
      "object_id": generateId(),
      "type": type
    }
  },

  /**
   * Constructs an object definition
   * @method
   * @param {Object} params - description object

   * @object
   * @param {Object} params - description object
  */
  "Construct": function(object) {
    var _obj = {}
    if (!isVoid(object.id)) {
      _obj.object_id = parseInt(object.id) + ""
    } else {
      _obj.object_id = generateId()
    }


    if (!isVoid(object.object_id)) {
      _obj.object_id = parseInt(object.object_id) + ""
    }

    if (isVoid(_obj.object_id)) {
      _obj.object_id = generateId()
    }

    if (_obj.object_id.length == 0) {
      console.warn("Refacturing ID complications")
      _obj.object_id = generateId()
    }


    if (isVoid(object.type)) {
      _obj.type = "empty"
    } else {
      _obj.type = object.type
    }

    if (isVoid(object.name)) {
      _obj.name = ""
    } else {
      _obj.type = object.name
    }

    if (!isVoid(object.scale)) {
      _obj.scaleX = object.scale.x + ""
      _obj.scaleY = object.scale.y + ""
      _obj.scaleZ = object.scale.z + ""
    } else {
      if (isVoid(object.scaleX)) {
        _obj.scaleX = "1"
      } else {
        _obj.scaleX = object.scaleX
      }
      if (isVoid(object.scaleY)) {
        _obj.scaleY = "1"
      } else {
        _obj.scaleY = object.scaleY
      }
      if (isVoid(object.scaleZ)) {
        _obj.scaleZ = "1"
      } else {
        _obj.scaleZ = object.scaleZ
      }
    }

    if (!isVoid(object.position)) {
      _obj.posX = object.position.x + ""
      _obj.posY = object.position.y + ""
      _obj.posZ = object.position.z + ""
    } else {
      if (isVoid(object.posX)) {
        _obj.posX = "0"
      } else {
        _obj.posX = object.posX + ""
      }
      if (isVoid(object.posY)) {
        _obj.posY = "0"
      } else {
        _obj.posY = object.posY + ""
      }
      if (isVoid(object.posZ)) {
        _obj.posZ = "0"
      } else {
        _obj.posZ = object.posZ + ""
      }
    }

    if (!isVoid(object.rotation)) {
      _obj.rotX = object.rotation.x + ""
      _obj.rotY = object.rotation.y + ""
      _obj.rotZ = object.rotation.z + ""
      _obj.rotW = object.rotation.w + ""
    } else {
      if (isVoid(object.rotX)) {
        _obj.rotX = "0"
      } else {
        _obj.rotX = object.rotX + ""
      }
      if (isVoid(object.rotY)) {
        _obj.rotY = "0"
      } else {
        _obj.rotY = object.rotY + ""
      }
      if (isVoid(object.rotZ)) {
        _obj.rotZ = "0"
      } else {
        _obj.rotZ = object.rotZ + ""
      }
      if (isVoid(object.rotW)) {
        _obj.rotW = "0"
      } else {
        _obj.rotW = object.rotW + ""
      }
    }

    if (!isVoid(object.parent)) {
      _obj.parent = object.parent + ""
    }

    return _obj
  },

  // this requires more thinking power than I have right now
  "RecursiveContruct": function(object) {
    let _obj = this.Construct(object)
    let objects = [_obj]
    if (!isVoid(object.children)) {
      for (let i = 0; i &lt; object.children.length; i++) {
        object.children[i].parent = _obj.object_id
        console.log("rec")
        console.log(object.children[i])
        let child = this.RecursiveContruct(object.children[i]);
        console.log(child)
        objects.push(child[0])
        console.log("both")
        console.log(objects)
      }
    }

    return objects
  }
}



function generateId() {
  var min = 1;
  var max = 100000;
  return Math.floor(Math.random() * (+max - +min)) + +min;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Main.html">Main</a></li></ul><h3>Classes</h3><ul><li><a href="module-Main-AVROS.html">AVROS</a></li></ul><h3>Events</h3><ul><li><a href="module-Main.html#~event:connected">connected</a></li><li><a href="global.html#event:playerentered">player entered</a></li><li><a href="global.html#event:playerupdate">player update</a></li></ul><h3>Global</h3><ul><li><a href="global.html#defaultIcon">defaultIcon</a></li><li><a href="global.html#Reset">Reset</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Jan 31 2021 17:23:42 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
